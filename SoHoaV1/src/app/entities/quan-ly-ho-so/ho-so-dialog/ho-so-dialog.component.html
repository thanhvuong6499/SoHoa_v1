<form [formGroup]="form" (ngSubmit)="save($event)" enctype="multipart/form-data" class="form-horizontal">

    <div class="modal-header" aria-hidden="true">
        <div *ngIf="hoso.profileId != null else themMoi">
            <h4 class="">Chỉnh sửa hồ sơ</h4>
        </div>

        <ng-template #themMoi>
            <h4 class="modal-title">Thêm mới hồ sơ</h4>

        </ng-template>
        <button type="button" class="close" aria-label="Close" (click)="activeModal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <!-- <div class="form-group">
        <label class="form-control-label">Mã phông</label>
        <input type="number" class="form-control" name="maphong" id="field_maphong"
            [(ngModel)]="phong.maphong" required/>
    </div> -->
        <!-- <div class="form-group row">
            <label class="col-md-3 col-form-label" for="select1">Cơ quan</label>
            <div class="col-md-9">
                <ng-select2
            [data]="organTypeList"
            [placeholder]="'Chọn loại cơ quan...'"
            [options]="options"
            name="loaiCoQuanID"
            [(ngModel)]="coQuan.loaiCoQuanID"
          ></ng-select2>
            </div>
        </div>
        <div class="form-group row">
            <label class="col-md-3 col-form-label" for="select1">Phông</label>
            <div class="col-md-9">
                <ng-select2
            [data]="organTypeList"
            [placeholder]="'Chọn loại cơ quan...'"
            [options]="options"
            name="loaiCoQuanID"
            [(ngModel)]="coQuan.loaiCoQuanID"

          ></ng-select2>
            </div>
        </div>

        <div class="form-group row">
            <label class="col-md-3 col-form-label" for="text-input">Mã danh mục</label>
            <div class="col-md-9">
                <ng-select2
                    [data]="organTypeList"
                    [placeholder]="'Chọn loại cơ quan...'"
                    [options]="options"
                    name="loaiCoQuanID"
                    [(ngModel)]="coQuan.loaiCoQuanID"
                ></ng-select2>
            </div>
        </div> -->

        <div class="form-group row">
            <label class="col-md-3 col-form-label" for="select1">Cơ quan: <span style="color: red;">(*)</span></label>
            <div class="col-md-9">
                <ng-select2
                    formControlName="organId"
                    [data]="lstOrgan"
                    [placeholder]="'Chọn cơ quan...'"
                    [options]="options"
                    name="organId"
                    (valueChanged)="onOrganChange($event)"
                    [(ngModel)]="hoso.organId"
                ></ng-select2>
                <div *ngIf="submitted && f.organId.status == 'INVALID'">
                    <div class="error"><span style="color:red;">Vui lòng chọn cơ quan.</span></div>
                </div>
            </div>
        </div>
        <div class="form-group row">
            <label class="col-md-3 col-form-label" for="select1">Phông: <span style="color: red;">(*)</span></label>
            <div class="col-md-9">
                <ng-select2
                    formControlName="fontId"
                    [data]="lstFont"
                    [placeholder]="'Chọn phông...'"
                    [options]="options"
                    name="fontId"
                    (valueChanged)="onFontChange($event)"
                    [(ngModel)]="hoso.fontId"
                ></ng-select2>
                <div *ngIf="submitted && f.fontId.status == 'INVALID'">
                    <div class="error"><span style="color:red;">Vui lòng chọn phông.</span></div>
                </div>
            </div>
        </div>
        <div class="form-group row">
            <label class="col-md-3 col-form-label" for="select1">Mục lục: <span style="color: red;">(*)</span></label>
            <div class="col-md-9">
                <ng-select2
                    formControlName="tableOfContentId"
                    required
                    [data]="lstDanhMuc"
                    [placeholder]="'Chọn mục lục số...'"
                    [options]="options"
                    name="tableOfContentId"
                    (valueChanged)="onTableOfContentChange($event)"
                    [(ngModel)]="hoso.tableOfContentId"
                ></ng-select2>
                <div *ngIf="submitted && f.tableOfContentId.status == 'INVALID'">
                    <div class="error"><span style="color:red;">Vui lòng chọn mục lục.</span></div>
                </div>
            </div>
        </div>
        <div class="form-group row">
            <label class="col-md-3 col-form-label" for="text-input">Hộp số: <span style="color: red;"> (*)</span></label>
            <div class="col-md-9">
                <ng-select2
                    formControlName="gearBox"
                    required
                    [data]="allGearBox"
                    [placeholder]="'Chọn hộp số...'"
                    [options]="options"
                    name="gearBoxId"
                    [(ngModel)]="hoso.gearBoxId"
                ></ng-select2>
                <div *ngIf="submitted && f.gearBox.status == 'INVALID'">
                    <div class="error">Vui lòng chọn hộp số.</div>
                  </div>
            </div>
        </div>
        <div class="form-group row">
            <label class="col-md-3 col-form-label" for="text-input" >Mã hồ sơ: <span style="color: red;"> (*)</span></label>
            <div class="col-md-9">
                <input type="text" id="fileCode" formControlName="fileCode" placeholder="Nhập mã hồ sơ" name="fileCode" [(ngModel)]="hoso.fileCode" class="form-control" [ngClass]="{'is-invalid': submitted && f.fileCode.errors}" />
                <div *ngIf="submitted && f.fileCode.errors" class="invalid-feedback">
                    <div *ngIf="f.fileCode.errors.required">Mã hồ sơ không được để trống.</div>
                  </div>
            </div>
        </div>
        <div class="form-group row">
            <label class="col-md-3 col-form-label" for="text-input">Hồ sơ số: <span style="color: red;"> (*)</span></label>
            <div class="col-md-9">
                <input id="fileNotation" formControlName="fileNotation" placeholder="Nhập số hồ sơ" name="fileNotation" class="form-control" [(ngModel)]="hoso.fileNotation" [ngClass]="{'is-invalid': submitted && f.fileNotation.errors}" />
                <div *ngIf="submitted && f.fileNotation.errors" class="invalid-feedback">
                    <div *ngIf="f.fileNotation.errors.required">Số hồ sơ không được để trống.</div>
                  </div>
            </div>
        </div>
        <div class="form-group row">
            <label class="col-md-3 col-form-label" for="text-input">Tiêu đề hồ sơ: <span style="color: red;"> (*)</span></label>
            <div class="col-md-9">
                <input type="text" id="title" name="title" formControlName="title"  class="form-control" [(ngModel)]="hoso.title" placeholder="Nhập tiêu đề hồ sơ" [ngClass]="{'is-invalid': submitted && f.title.errors}" />
                <div *ngIf="submitted && f.title.errors" class="invalid-feedback">
                    <div *ngIf="f.title.errors.required">Tiêu đề hồ sơ không được để trống.</div>
                  </div>
            </div>
        </div>
        
        <div class="form-group row">
            <label class="col-md-3 col-form-label" for="select1">Loại hồ sơ: </label>
            <div class="col-md-9">
                <ng-select2
                    formControlName="profileTypeId"
                    [data]="allProfileType"
                    [placeholder]="'Chọn loại hồ sơ...'"
                    [options]="options"
                    name="profileTypeId"
                    [(ngModel)]="hoso.profileTypeId"
              ></ng-select2>
            </div>
        </div>
        <div class="form-group row">
            <label class="col-md-3 col-form-label" for="text-input">Thời hạn bảo quản: <span style="color: red;"> (*)</span></label>
            <div class="col-md-9">
                <input type="text" name="maintenance" formControlName="maintenance" [(ngModel)]="hoso.maintenance" placeholder="Nhập thời hạn bảo quản" class="form-control" [ngClass]="{'is-invalid': submitted && f.maintenance.errors}">
                <div *ngIf="submitted && f.maintenance.errors" class="invalid-feedback">
                    <div *ngIf="f.maintenance.errors.required">Nhập thời hạn bảo quản.</div>
                  </div>
            </div>
        </div>
        <div class="form-group row">
            <label class="col-md-3 col-form-label" for="text-input">Chế độ sử dụng:</label>
            <div class="col-md-9">
                <ng-select2
                    formControlName="rights"
                    [data]="allRights"
                    [placeholder]="'Chọn chế độ sử dụng...'"
                    [options]="options"
                    name="rights"
                    [(ngModel)]="hoso.rights"
              ></ng-select2>
            </div>
        </div>
  
        <div class="form-group row">
            <label class="col-md-3 col-form-label" for="date-input">Thời gian bắt đầu: <span style="color: red;"> (*)</span></label>
            <div class="col-md-9">
                <input class="form-control" id="date-input-start" formControlName="startDate" type="date" name="startDate" [(ngModel)]="hoso.startDate" [ngClass]="{'is-invalid': submitted && f.startDate.errors}">
                <div *ngIf="submitted && f.startDate.errors" class="invalid-feedback">
                    <div *ngIf="f.startDate.errors.required">Nhập thời gian bắt đầu</div>
                  </div>
            </div>
        </div>
        <div class="form-group row">
            <label class="col-md-3 col-form-label" for="end-input">Thời gian kết thúc: </label>
            <div class="col-md-9">
                <input class="form-control" id="date-input-end" type="date" formControlName="endDate" name="endDate" [(ngModel)]="hoso.endDate">
            </div>
        </div>
        <!-- <div class="form-group row">
            <label class="col-md-3 col-form-label" for="text-input">Tổng số văn bản trong hồ sơ: <span style="color: red;"> (*)</span></label>
            <div class="col-md-9">
                <input type="number" min="0" name="totalDoc" formControlName="totalDoc" [(ngModel)]="hoso.totalDoc" placeholder="Tổng số văn bản" class="form-control" [ngClass]="{'is-invalid': submitted && f.totalDoc.errors}" />
                <div *ngIf="submitted && f.totalDoc.errors" class="invalid-feedback">
                    <div *ngIf="f.totalDoc.errors.required">Nhập tổng số văn bản có trong hồ sơ (số nguyên không âm).</div>
                  </div>
            </div>
        </div> -->
      
        <div class="form-group row">
            <label class="col-md-3 col-form-label" for="text-input">Số lượng tờ: <span style="color: red;"> (*)</span></label>
            <div class="col-md-9">
                <input type="number" min="0" id="sheet-number" formControlName="sheetNumber" name="sheetNumber" [(ngModel)]="hoso.sheetNumber" placeholder="Số lượng tờ" class="form-control" [ngClass]="{'is-invalid': submitted && f.sheetNumber.errors}" />
                <div *ngIf="submitted && f.sheetNumber.errors" class="invalid-feedback">
                    <div *ngIf="f.sheetNumber.errors.required">Nhập tổng số tờ có trong hồ sơ (số nguyên không âm).</div>
                  </div>
            </div>
        </div>
        <div class="form-group row">
            <label class="col-md-3 col-form-label" for="text-input">Số lượng trang: </label>
            <div class="col-md-9">
                <input type="number" id="page-number" name="pageNumber" formControlName="pageNumber" [(ngModel)]="hoso.pageNumber" [value]="hoso.sheetNumber * 2" placeholder="Số lượng trang" class="form-control" readonly="readonly">
            </div>
        </div>
        <div class="form-group row">
            <label class="col-md-3 col-form-label" >Tình trạng vật lý:</label>
            <div class="col-md-9">
                <input type="text" id="format" name="format" formControlName="format" [(ngModel)]="hoso.format" placeholder="Tình trạng vật lý" class="form-control">
            </div>
        </div>
        
        <div class="form-group row">
            <label class="col-md-3 col-form-label" for="text-input">Ngôn ngữ:</label>
            <div class="col-md-9">
                    <ng-select2
                        formControlName="language"
                        [data]="languages"
                        [placeholder]="'Chọn ngôn ngữ...'"
                        [options]="options"
                        name="language"
                        [(ngModel)]="hoso.language"
                  ></ng-select2>
            </div>
        </div>
        <div class="form-group row">
            <label class="col-md-3 col-form-label" for="textarea-input">Mô tả / Chú giải:</label>
            <div class="col-md-9">
                <textarea id="description" name="description" formControlName="description" [(ngModel)]="hoso.description" rows="9" class="form-control"></textarea>
            </div>
        </div>
      
        <div class="form-group row">
            <label class="col-md-3 col-form-label" for="text-input">Ký hiệu thông tin:</label>
            <div class="col-md-9">
                <input type="text" name="inforSign" formControlName="inforSign" [(ngModel)]="hoso.inforSign" placeholder="Nhập ký hiệu thông tin" class="form-control">
            </div>
        </div>
        <div class="form-group row">
            <label class="col-md-3 col-form-label" for="text-input">Từ khóa:</label>
            <div class="col-md-9">
                <input type="text" id="keyword" name="keyWord" formControlName="keyWord" [(ngModel)]="hoso.keyWord" placeholder="Nhập từ khoá" class="form-control">
            </div>
        </div>
        <div class="form-group row">
            <label class="col-md-3 col-form-label" for="file-multiple-input">Tải lên file:</label>
            <div class="col-md-9">
                <!-- <input type="file" id="file-multiple-input" accept=".pdf" name="file-multiple-input" multiple> -->
                <mat-card-content>
                    <!-- <mat-form-field class="form-field">
                      <mat-label>Select Document Type</mat-label>
                      <mat-select formControlName="type" required>
                        <mat-option value="Passport">Passport</mat-option>
                        <mat-option value="Driving_license">Driving License</mat-option>
                        <mat-option value="PAN">PAN</mat-option>
                      </mat-select>
                    </mat-form-field> -->
                    <!-- <br> -->
                    <input type="file" ng2FileSelect accept=".pdf" [uploader]="uploader" (change)="fileInputChange(uploaderAfterChange.queue)" multiple/><br/>
                    <br>
                    <!-- <div class="drop-zone">
                    <div ng2FileDrop [uploader]="uploader" class="drop-zone">
                       Drag and drop files to upload
                    </div>
                    </div> -->
                    <div *ngIf="uploader.queue.length != 0">
                        <label>Bạn vừa chọn <b>{{ uploader.queue.length }}</b> file.</label>
                    <table>
                      <thead>
                      <tr>
                        <th width="90%">
                          Tên file
                        </th>
                        <th width="10%">
                          Delete
                        </th>
                      </tr>
                      </thead>
                      <tbody>
                      <tr *ngFor="let item of uploader.queue">
                        <th width="90%">
                          {{ item.file.name }} ({{ item.file.size/1000000 }} MB)
                        </th>
                        <th class="text-center" width="10%">
                          <mat-icon (click)="item.remove()" style="cursor: pointer;">delete</mat-icon>
                        </th>
                      </tr>
                      </tbody>
                    </table>
                </div>
                    <br>
                    <!-- <button mat-raised-button color="accent" type="submit">Upload Data</button> -->
                  </mat-card-content>
            </div>
        </div>
        
        
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="clear()">
            <span class="fa fa-ban"></span>&nbsp;<span>Cancel</span>
        </button>
        <button type="submit" class="btn btn-primary">
            <span class="fa fa-save"></span>&nbsp;<span>Save</span>
        </button>
    </div>
    
</form>
<script type="text/javascript">
   
</script>
